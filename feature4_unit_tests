import unittest
import datetime
import data_procession

class TestPredictUser(unittest.TestCase):
    def test_Should_ReturnPredictedUser_When_PredictUserCalledWithValidDateAndUserId(self, mock_open, mock_load):
        user = {'userId': 'test_user', 'isOnline': True, 'onlinePeriods': [['2023-09-25T17:26:28.123456+03:00', None]]}
        mock_load.return_value = [user]
        date = datetime.now()

        result = data_procession.predict_user(date, 'test_user')

        self.assertEqual(result['onlineChance'], 1)

    def test_Should_ReturnNone_When_PredictUserCalledWithInvalidUserId(self, mock_open, mock_load):
        user = {'userId': 'test_user', 'isOnline': True, 'onlinePeriods': [['2023-09-25T17:26:28.123456+03:00', None]]}
        mock_load.return_value = [user]
        date = datetime.now()

        result = data_procession.predict_user(date, 'invalid_user')

        self.assertEqual(result, None)
