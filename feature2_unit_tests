import unittest
import data_procession

class TestGetUserData(unittest.TestCase):
    def test_Should_ReturnUserData_When_GetUserDataCalledWithValidDateAndUserId(self, mock_open, mock_load):
        user = {'userId': 'test_user', 'isOnline': True, 'onlinePeriods': [['2023-09-25T17:26:28.123456+03:00', None]]}
        mock_load.return_value = [user]
        date = data_procession.datetime.now()

        result = data_procession.get_user_data(date, 'test_user')

        self.assertEqual(result['wasUserOnline'], True)
        self.assertEqual(result['nearestOnlineTime'], None)

    def test_Should_ReturnNone_When_GetUserDataCalledWithInvalidUserId(self, mock_open, mock_load):
        user = {'userId': 'test_user', 'isOnline': True, 'onlinePeriods': [['2023-09-25T17:26:28.123456+03:00', None]]}
        mock_load.return_value = [user]
        date = data_procession.datetime.now()

        result = data_procession.get_user_data(date, 'invalid_user')

        self.assertEqual(result, None)
